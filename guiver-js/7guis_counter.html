<html>
<head>
    <script type="text/javascript" src="widget_manager.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            let widget_manager = new WidgetManager();

            let counter = 0;

            let padding = widget_manager.next_widget_id();
            let row = widget_manager.next_widget_id();
            let counter_text = widget_manager.next_widget_id();
            let counter_button = widget_manager.next_widget_id();

            widget_manager.handle_events(function (custom_event) {
                counter += 1;

                widget_manager.handle_commands([
                    ["Command::SetValue", counter_text, counter]
                ]);
            });

            widget_manager.handle_commands([
                // Create the widgets.
                // =========================================================================================================
                ["Command::CreateWidget", padding, "WidgetType::Padding"],
                ["Command::CreateWidget", row, "WidgetType::Row"],
                ["Command::CreateWidget", counter_text, "WidgetType::Text", "0"],
                ["Command::CreateWidget", counter_button, "WidgetType::TextButton", "Count"],
                // Compose the widgets.
                // =========================================================================================================
                ["Command::SetMainWidget", padding],
                ["Command::AddChild", {
                    "parent_widget_id": padding,
                    "child_widget_id": row,
                }],
                ["Command::AddChild", {
                    "parent_widget_id": row,
                    "child_widget_id": counter_text,
                }],
                ["Command::AddChild", {
                    "parent_widget_id": row,
                    "child_widget_id": counter_button,
                }],
                // Add event observations.
                // =========================================================================================================
                ["Command::AddEventObservation", counter_button, "WidgetEventType::Clicked", "CustomEvent::Count"],
            ]);
        }
    </script>
</head>
<body></body>
</html>